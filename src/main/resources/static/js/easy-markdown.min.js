/**
 * easy-markdown - a simple markdown to html parser
 * Copyright (c) 2017, Tianzhen(340349237@qq.com). (MIT License).
 */
var Reader=function(){function e(e){this.reader=document.getElementById(e).value;var t=document.createElement("div");t.innerText=this.reader,this.readerTransfer=t.innerHTML,this.lines=this.getLines()}return e.prototype.testLines=function(e){return e<this.lines.length},e.prototype.runParser=function(){for(var e=0,t=[],i="",r=[],s=null;this.testLines(e);)if(this.parser=new Parser(this.getLineText(e)),this.parser.isEmptyLine())t.push("<br>"),e++;else if(this.parser.isHeading()){var n=0;r=this.parser.line.split(" ");for(var o=0;o<r[0].length;o++)"#"==r[0][o]&&n++;i=this.parser.line.replace(this.parser.heading,""),t.push("<h"+n+">"+i+"</h"+n+">\n"),e++}else if(this.parser.isHr())t.push("<hr>"),e++;else if(this.parser.isBlockQuote()){for(i=this.parser.line.replace(this.parser.blockQuote,""),i="<p>"+i+"</p>\n",s=new Parser(this.getLineText(e+1));s.isBlockQuote();)i+="<p>"+s.line.replace(s.blockQuote,"")+"</p>\n",e++,s=new Parser(this.getLineText(e+1));t.push("<blockquote>"+i+"</blockquote>"),e++}else if(this.parser.isUnorderedList()){for(i=this.parser.line.replace(this.parser.unorderedList,""),i="<li>"+i+"</li>\n",s=new Parser(this.getLineText(e+1));s.isUnorderedList();)i+="<li>"+s.line.replace(s.unorderedList,"")+"</li>\n",e++,s=new Parser(this.getLineText(e+1));i="<ul>"+i+"</ul>\n",t.push(i),e++}else if(this.parser.isOrderedList()){for(i=this.parser.line.replace(this.parser.orderedList,""),i="<li>"+i+"</li>\n",s=new Parser(this.getLineText(e+1));s.isOrderedList();)i+="<li>"+s.line.replace(s.orderedList,"")+"</li>\n",e++,s=new Parser(this.getLineText(e+1));i="<ol>"+i+"</ol>\n",t.push(i),e++}else if(this.parser.isCodeBlock()){for(i=this.parser.line.replace(this.parser.codeBlock,""),i='<pre><code class="'+i+'">',s=new Parser(this.getLineText(e+1));!s.isCodeBlock()&&this.testLines(e+1);){var h=document.createElement("div");h.innerText=s.line,i+=h.innerHTML+"\n",e++,s=new Parser(this.getLineText(e+1))}i="<div>"+i+"</code></pre></div>\n",t.push(i),e+=2}else i=this.parser.inlineParse(),i="<p>"+i+"</p>",t.push(i),e++;return t},e.prototype.getHtml=function(){return this.runParser()},e.prototype.showHtml=function(e){for(var t=document.getElementById(e),i="",r=0,s=this.getHtml();r<s.length;r++){var n=s[r];i+=n}i='<div class="easy-markdown">'+i+"</div>",t.innerHTML=i},e.prototype.getLineText=function(e){return this.oneLineText=this.getLines()[e],this.oneLineText},e.prototype.getLines=function(){return this.lines=this.reader.split("\n"),this.lines},e}(),Parser=function(){function e(e){this.heading=/^(#{1,6}\s*)/,this.hr=/^(\*{3,}|-{3,})/,this.blockQuote=/^(\>\s+)/,this.unorderedList=/^((\*|-){1}\s+)/,this.orderedList=/^(\d{1}.\s+)/,this.codeBlock=/^(```)/,this.link=/\[(.*?)\]\((.*?)\)/g,this.image=/\!\[(.*?)\]\((.*?)\)/g,this.strongText=/\*{2}(.*?)\*{2}/g,this.emText=/\*{1}(.*?)\*{1}/g,this.codeLine=/\`{1}(.*?)\`{1}/g,this.line=e}return e.prototype.isLastLine=function(){},e.prototype.isEmptyLine=function(){return""==this.line},e.prototype.isHeading=function(){return this.heading.test(this.line)},e.prototype.isUnorderedList=function(){return this.unorderedList.test(this.line)},e.prototype.isOrderedList=function(){return this.orderedList.test(this.line)},e.prototype.isHr=function(){return this.hr.test(this.line)},e.prototype.isBlockQuote=function(){return this.blockQuote.test(this.line)},e.prototype.isCodeBlock=function(){return this.codeBlock.test(this.line)},e.prototype.isImage=function(){return this.image.test(this.line)},e.prototype.parseImage=function(e){return e.replace(this.image,function(e,t,i){return'<img src="'+i+'" alt="'+t+'">'})},e.prototype.isLink=function(){return this.link.test(this.line)},e.prototype.parseLink=function(e){return e.replace(this.link,function(e,t,i){return'<a href="'+i+'">'+t+"</a>"})},e.prototype.isStrongText=function(){return this.strongText.test(this.line)},e.prototype.parseStrongText=function(e){return e.replace(this.strongText,function(e,t){return"<b>"+t+"</b>"})},e.prototype.isEmText=function(){return this.emText.test(this.line)},e.prototype.parseEmText=function(e){return e.replace(this.emText,function(e,t){return"<em>"+t+"</em>"})},e.prototype.isCodeLine=function(){return this.codeLine.test(this.line)},e.prototype.parseCodeLine=function(e){return e.replace(this.codeLine,function(e,t){return"<code>"+t+"</code>"})},e.prototype.inlineParse=function(e){return void 0===e&&(e=this.line),this.isCodeLine()&&(e=this.parseCodeLine(e)),this.isImage()&&(e=this.parseImage(e)),this.isLink()&&(e=this.parseLink(e)),this.isStrongText()&&(e=this.parseStrongText(e)),this.isEmText()&&(e=this.parseEmText(e)),e},e}();